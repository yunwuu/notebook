> 习题来自： 《C语言程序设计（第4版）》 何钦铭著 高等教育出版社 ISBN 9787040545067 

## 选择题
1. 下列语句定义 px 为指向 int 类型变量的指针，正确的是（ ）。

A. int x, *px=x;

B. int x, *px=&x;

C. int *px=&x, x;

D. int x, px=x;

答案：B


2. 以下选项中，对基本类型相同的指针变量不能进行运算的运算符是（ ）。

A. =

B. ==

C. +

D. -

答案： C

解析： 基本类型相同的指针变量可以互相赋值，也可以相减，表示两个内存地址相隔的同类型**元素个数**。 相加是非法的。


3. 下列程序的输出结果是（ ）。
```c
void f(int *p)
{
	*p = 5;
}
int main(void)
{
	int x = 10, *px = &x;
	f(px);
	printf("%d#", (*px)++);
	printf("%d\n", x);
	return 0;
}
```

A.5#6

B.6#6

C.10#11

D.11#11

答案： A

解析： px为实参，p为形参，`*p=5`将实参px指向的变量改为5；`i++`为先输出后自增，因此(*px)++的值为5，自增后再打印`*px`指向的x值为6.


4. 以下程序的输出结果是（ ）。

```c
void sub(int x, int y, int *z)
{
	*z = y - x;
}
int main(void)
{
	int a, b, c;
	sub(10, 5, &a);
	sub(7, a, &b);
	sub(a, b, &c);
	printf("%d,%d,%d\n", a, b, c);
	return 0;
}
```

A.5,2, 3

B.5, -2, -7

C.-5,-12, -17

D.-5,-12, - 7

答案： D

解析：
```c
void sub(int x, int y, int *z)
{
	*z = y - x;
}
int main(void)
{
	int a, b, c;
	sub(10, 5, &a); // a = -5
	sub(7, a, &b); // b = -12
	sub(a, b, &c); // c = -7
	printf("%d,%d,%d\n", a, b, c);
	return 0;
}
```


5. 若有以下定义，且 0<=i<10 ，则对数组元素的错误引用是（ ）。

```c
int i,a[]={0,1,2,3,4,5,6,7,8,9},*p=a;
```

A. `*(a+i)`

B. `a[p-a+i]`

C. `p+i`

D. `*(&a[i])`


答案： C

解析：`p+i`的类型是指针，要表示数组元素，应使用`*`。


6. 下列程序段的输出结果是（ ）。

```c
int a[10]={0,1,2,3,4,5,6,7,8,9},*p=a+3;
printf("%d", *++p);
```

答案： B

解析： `*(ptr)`表示输出指针指向的变量的值； `++p`表示先自增后输出，即`a+4`。


7. 对于下面的程序段，叙述正确的是（ ）。

```c
char s[]="china", *p=s;
```

A. *p与 `s[0]` 相等

B.数组 s 中的内容和指针变量 p 中的内容相等

C. s 和 p 完全相同

D.数组 s 的长度和 p 所指向的字符串长度相等

答案： A

解析：
B： `s`的内容是字符串， `p`的内容是内存地址。
C： `s`是常量指针。
D： `s`的长度比`p`的长度大1 。


8. 下面程序段的运行结果是（ ）。 

```c
char s[] = "language", *p = s;
	while (*p++ != 'u')
	{
		printf("%c", *p - 'a' + 'A');
	}
```

A. LANGUAGE

B. ANGU

C. LANGU

D. LANG


答案： B

解析： 首先，`*p++`为先运算后自增，因此先计算 `*p != 'u'`， 之后`p`自增， 因此第一次输出的字符是 A 而不是 L， 以此类推， 答案为ANGU。


## 填空题
1. 输出一维数组最大元素和最小元素的下标。査找一维数组的最大元素和最小元素的下标，分別存放在函数 main() 的 maxsub 和 minsub 变量中。请填空。
```c
void find(int *, int, int *, int *);
int main(void)
{
	int maxsub, minsub, a[] = {5, 3, 7, 9, 2, 0, 4, 1, 6, 8};
	find(____________);
	printf("maxsub=%d, minsub=%d\n", maxsub, minsub);
	return 0;
}
void find(int *a, int n, int *maxsub, int *minsub)
{
	int i;
	*maxsub = *minsub = 0;
	for (i = 1; i < n; i++)
	{
		if (a[i] > a[*maxsub])
			____________;
		if (a[i] < a[*minsub])
			____________;
	}
}
```


答案：
```c
void find(int *, int, int *, int *);
int main(void)
{
	int maxsub, minsub, a[] = {5, 3, 7, 9, 2, 0, 4, 1, 6, 8};
	find(a, 10, &maxsub, &minsub); // 取maxsub 和 minsub 的地址
	printf("maxsub=%d, minsub=%d\n", maxsub, minsub);
	return 0;
}
void find(int *a, int n, int *maxsub, int *minsub)
{
	int i;
	*maxsub = *minsub = 0;
	for (i = 1; i < n; i++)
	{
		if (a[i] > a[*maxsub])
			*maxsub = i;
		if (a[i] < a[*minsub])
			*minsub = i;
	}
}
```


2. 数组插值。函数 insert() 的功能是在一维数组 a 中将 x 插入到下标为 i （i>=0）的元素前，如果 i>=元素个数，则 x 插入到末尾，元素个数存放在指针 n 所指向的变量中，插入后元素个数加 1 。请填空。
```c
void insert(int a[], int *n, int x, int i)
{
	int j;
	if (________)
	{
		for (j = *n - 1; ________; j--)
			________ = a[j];
	}
	else
	{
		i = *n;
	}
	a[i] = ________;
	(*n)++;
}
```

答案：
```c
void insert(int a[], int *n, int x, int i)
{
	int j;
	if (i < *n) 
	{
		for (j = *n - 1; j >= i; j--)
			a[j+1] = a[j];
	}
	else
	{
		i = *n;
	}
	a[i] = x;
	(*n)++;
}
```


3. 判断回文。先消除输入字符串 s 的前后空格，再判断其是否为“回文”(即字符串正读和倒读都是一样的)， 若是则输出 Yes ，否则输出 No。请填空。

```c
char ch, s[80], *p, *q;
int i, j, n;
gets(s);
p = _________;
while (*p == ' ')
{
	_________;
}
n = strlen(s);
q = _________;
while (*q == ' ')
{
	q--;
}
while (_________ && *p == *q)
{
	p++;
	_________;
}
if (p < q)
	printf("No\n");
else
	printf("Yes\n");
```


答案：
```c
char ch, s[80], *p, *q;
int i, j, n;
gets(s);
p = s;
while (*p == ' ')
{
	p++;
}
n = strlen(s);
q = s + n - 1; // 指针指向数组尾部，从尾部消除空格
while (*q == ' ')
{
	q--;
}
while (p < q && *p == *q) // p >= q 表示两指针相遇
{
	p++;
	q--;
}
if (p < q)
	printf("No\n");
else
	printf("Yes\n");
```


4. 最大字符移位。在字符串 str 中找出最大的字符，将在该字符前的所有字符往后顺序移动一位，再把最大字符放在字符串的第一个位置上。如 " knowedge" 变成 "wknoledge" 。请填空。
```c
char max, str[80], *p = str, *q = str;
gets(p);
max = *(p++);
while (*p != '\0')
{
	if (max < *p)
	{
		max = *p;
		__________;
	}
	p++;
}
p = q;
while (__________)
{
	__________;
	p--;
}
*p = max;
puts(p);
```

答案：
```c
char max, str[80], *p = str, *q = str;
gets(p);
max = *(p++);
while (*p != '\0')
{
	if (max < *p)
	{
		max = *p;
		q = p; 
	}
	p++;
}
p = q;
while (p != str)
{
	*p = *(p - 1); // 后移
	p--;
}
*p = max; // 首位插入max的值
puts(p);
```


5. 字符传送。将字符串 s1 的所有字符传送到字符串 s2 中，要求每传送 3 个字符就再存放一个星号。如字符串 s1 为 "abedefg" ，则字符串 s2 为 `"abe*def*g"`。请填空。

```c
char s1[80], s2[80], *p = s1;
int cnt = 0, k = 0;
gets(p);
while (*p != '\0')
{
	s2[k] = *p;
	k++;
	p++;
	cnt++;
	if (_________)
	{
		s2[k] = '*';
		_________;
		_________;
	}
}
s2[k] = '\0';
puts(s2);
```

答案：
```c
char s1[80], s2[80], *p = s1;
int cnt = 0, k = 0;
gets(p);
while (*p != '\0')
{
	s2[k] = *p;
	k++;
	p++;
	cnt++;
	if (cnt == 3)
	{
		s2[k] = '*';
		k++;
		cnt = 0; // 计数器归零
	}
}
s2[k] = '\0';
puts(s2);
```

## 程序设计题
1. 拆分实数的整数与小数部分：要求自定义一个函数 void splitfloat (float x，int *intpart, float *fracpart)， 其中 x 是被拆分的实数，* intpart 和 * fracpart 分别是将实数 x 拆分出来的整数部分与小数部分。编写主函数，并在其中调用函数 splitfloat() 。试编写相应程序。
```c
void splitfloat(float x, int *intpart, float *fracpart) {
	*intpart = (int)x;
	*fracpart = x - *intpart;
}

int main() {
	float x, fracpart;
	int intpart;
	printf("Input a number: ");
	scanf("%f", &x);
	splitfloat(x, &intpart, &fracpart);
	printf("intpart=%d, fracpart=%f\n", intpart, fracpart);
	return 0;
}
```

[完整代码](/codes/8yqgdt6g.c)


2. 在数组中查找指定元素：输入一个正整数 n （1<n≤10），然后输入 n 个整数存入数组 a 中，再输入一个整数 x ，在数组 a 中查找 x ，若找到则输出相应的下标，否则显示 Not found。要求定义和调用函 search(int lis[], int n, int x)， 在数组 list 中查找元素 x ，若找到则返回相应下标，否则返回 -1，参数 n 代表数组 list 中元素的数量。试编写相应程序。
```c
int search(int lis[], int n, int x) {
	int i = 0;
	while(i < n) {
		if(lis[i] == x) return i;
		else i++;
	}
	return -1;
}

int main() {
	int n, x;
	printf("Input n:");
	scanf("%d", &n);
	int lis[10];
	printf("Input x:");
	scanf("%d", &x);
	printf("Input %d numbers:", &n);
	for(int k=0; k<n; k++) {
		scanf("%d", &lis[k]);
	}
	int res = search(lis, n, x);
	if(res == -1) printf("没有找到！");
	else printf("索引为%d", res);
	return 0;
}
```

3. 循环后移：有 n 个整数，使前面各数顺序向后移 m 个位置，移出的数再从开头移入。编写一个函数实现以上功能，在主函数中输入 n 个整数并输出调整后的 n 个数。试编写相应程序。
```c
void moveNumbers(int arr[], n) {
	int tmp = arr[n-1]; // 暂存最后一位
	for(int i=n-1; i>0; i--) {
		arr[i] = arr[i-1];
	}
	arr[0] = tmp;
}

int main() {
	int n, m;
	printf("Input n:");
	scanf("%d", &n);
	int arr[n];
	printf("Input %d numbers:", n);
	for(int i=0; i<n; i++) {
		scanf("%d", &arr[i]);
	}
	for(int i=0; i<n; i++) {
		printf("%d ", arr[i]);
	}
	printf("Input m:");
	scanf("%d", &m);
	for(int i=0; i<m; i++) {
		moveNumbers(arr, n);
	}
	for(int i=0; i<n; i++) {
		printf("%d ", arr[i]);
	}
	return 0;
}
```


4. 报数：有 n 个人围成一圈，按顺序从 1 到 n 编好号。从第一个人开始报数，报到 m（m<n）的人退出圈子，下个人从 1 开始报数，报到 m 的人退出圈子。 如此下去，直到留下最后一个人。输入整数 n 和 m ，并按退出顺序输出退出圈子的人的编号。试编写相应程序。
```c
int main() {
	int n;
	printf("Input n:");
	scanf("%d", &n);
	int status[n] = {0};
	int cnt = n; // 圈子里剩余的人数
	while(cnt > 1) {
		int tmp = 0;
		for(int i=0; i < n, tmp < m; i++) {
			if(status[i] == 0) tmp++;
		}
		status[i] = 1;
		printf("%d", i);
		cnt--;
	}

}
```


5. 使用函数实现字符串复制：输入一个字符串 t 和一个正整数 m， 将字符串 t 中从第 m 个字符开始的全部字符复制到字符串 s 中，再输出字符串 s 。要求自定义并调用函数 void strmcpy(char *s， char *t， int m)。试编写相应程序。

```c
void strmcpy(char *s, char *t, int m) {
	int s_length = 0;
	for(int i=0; s[i] != '\0'; i++) {
		s_length++;
	}
	int index = s_length;
	for(int i=m; t[i] != '\0'; i++) {
		s[index++] = t[i];
	}
	s[index] = '\0';
}


int main() {
	int m;
	printf("Input m:");
	scanf("%d", &m);
	char t[100], s[200];
	printf("Input chars:")
	for(int i=0; ; i++) {
		scanf("%c", &t[i]);
		if(t[i] == '\0') break;
	}
	s[0] = '\0';
	strmcpy(s, t, m);
	for(int i=0; s[i] != '\0'; i++) {
		printf("%c", s[i]);
	}
	return 0;
}
```