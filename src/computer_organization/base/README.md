# 计算机基本组成

## 冯 诺伊曼计算机的特点
1. 计算机的五大部件：
    1. 运算器：完成算术运算和逻辑运算，并将运算的中间结果暂存于运算器内。
    2. 存储器：存放数据和程序。
    3. 控制器：控制和指挥程序和数据的输入，运行以及处理运算结果。
    4. 输入设备
    5. 输出设备
2. 指令和数据**以同等地位**存放于存储器内，按**地址**寻访。
3. 指令和数据以二进制数表示。
4. 指令由**操作码**和**地址码**组成。操作码表明了要进行的操作，地址码表明了要进行操作的数据在地址中的位置。
5. 指令在存储器中按**顺序**存放，无特定条件的情况下，指令按存储顺序执行。
6. 机器以运算器为中心。而现代计算机结构更多以**存储器**为中心。

## 计算机硬件框图
![冯 诺伊曼计算机结构框图](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/5a937adaa66d58b99ca5e0da2b389937.png)

![以存储器为中心的计算机结构框图](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/20200923112810859.png)

现代计算机基于冯诺伊曼计算机的结构做了进一步的改进。例如将运算器和控制器通过**集成电路**集成在同一芯片上，统称为**中央处理器**(Central Processing Unit, CPU)， 输入和输出设备简称为 I/O 设备 (Input/Output Equipment).

因此，现代计算机由三大部分组成： CPU, I/O, 主存储器(Main Memory, MM)。

![](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/20201007133302944.png)


## 计算机的工作过程
![](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/20201007133544243.png)

### 主存储器
1. 主存储器（或**内存**）包括：
    1. 存储体M
    2. 存储数据寄存器MDR
    3. 存储地址寄存器MAR
2. 存储体M:
    1. 由许多**存储单元**组成。
    2. 每个存储单元包含若干个**存储元件**（存储元，存储基元）。
    3. 每个存储元件可以寄存**一个**二进制代码。
    4. 一个存储单元就是一串二进制代码。这一串二进制代码称为一个**存储字**。
    5. 存储单元中二进制代码的长度，也就是存储字的长度，称为**存储字长**。存储字长为8的倍数，如8位，32位等。
    6. 一个存储字可以代表一个二进制数，一串字符，还可以代表一条指令。
3. 存储地址寄存器MAR:
    1. 用来存放**要访问的存储单元的地址**。
    2. MAR的位数对应存储单元的个数。如MAR 4位，表示有 $2^4$ 个存储单元。
4. 存储数据寄存器MDR:
    1. 用来存放从存储体某单元取出的代码或者准备向某个存储单元存入的代码。
    2. MDR的位数 **=存储字长**。
5. 1Byte = 8bit

### 运算器
1. 运算器至少包括三个寄存器（其中X操作数寄存器往往有多个）和一个**算术逻辑单元**（ALU），ALU是运算器的核心。
2. 三个寄存器：
    1. ACC 累加器
    2. MQ 乘商寄存器
    3. X 操作数寄存器

![各寄存器存放的各类操作数](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/689056-20211212154928359-49997161.png)


### 控制器
1. 控制器是计算机的神经中枢，指挥各个部件协调工作。
2. 三个部件：
    1. PC 程序计数器
    2. IR 指令寄存器
    3. CU 控制单元（是控制器的核心）
3. 大致步骤：
    1. PC存放了当前要执行指令的地址，它和MAR直接连接，且自动自增（以执行下一条指令）。
    2. IR存放了当前的指令，且该指令来自**MDR**，是由MAR存放的地址在存储体中找到的内容。
    3. 指令包括**操作码**和**地址码**。 CU接收来自IR的指令中的操作码（`OP(IR)`），记作 `OP(IR) -> CU`，用来分析指令。
    4. MAR接收来自IR指令中的地址码（`Ad(IR)`）作为操作数的地址，记作 `Ad(IR) -> MAR` 。
    5. CU将指令传入ALU，进行运算，如加法操作，则将X和ACC中的数相加，并存放在ACC内。


以下是存储器，运算器，控制器协同工作的示意图：

![流程图](https://yunwu-images.oss-cn-shanghai.aliyuncs.com/kwjdidwe.png)

## 计算机硬件的主要技术指标
### 机器字长
指的是CPU一次能处理数据的位数，和CPU的寄存器位数有关。

### 存储容量
1. 存储容量=存储单元个数*存储字长， 即：设 MAR位数为 $x$ MDR位数为 $y$ 总容量 = $(2^x \times y \div 8)$ Byte.
2. $2^{10}=K$ $2^{20}=M$ $2^{30}=G$ $2^{40}=T$

### 运算速度
1. CPU主频： CPU内数字脉冲信号振荡的**频率**，是**CPU时钟周期的倒数**。
2. CPI： 执行一条指令需要的时钟周期。
3. CPU执行时间（执行一条指令的耗时）= CPU时钟周期 * CPI
4. IPS： 单位时间内执行指令的平均条数。 现代机器IPS的值通常很高，因此可以用MIPS表示百万条指令每秒，此处M与存储容量中的M不同，下方详述。
5. FLOPS： 单位时间内执行浮点运算的平均条数。同IPS，会有KFLOPS, MFLOPS...
6. 对于运算速度，包括IPS, FLOPS以及CPU主频中的 K,M,G... : $10^3=K$ $10^6=M$ $10^9=G$ $10^{12}=T$
7. 数据通路带宽： 数据总线一次所能并行传送信息的位数。
8. 吞吐量： 系统在单位时间内处理请求的数量。